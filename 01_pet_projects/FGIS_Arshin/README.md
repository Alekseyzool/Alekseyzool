# FGIS Arshin

**Цель:** Автоматизировать загрузку сведений о поверках и утверждениях типа средств измерений из ФГИС «Аршин» в ClickHouse.  
**Данные:** REST-API ФГИС «Аршин» (эндпоинты VRI и MIT) с поддержкой пакетных запросов и выгрузки деталей; результаты сохраняются в ClickHouse.  
**Подход:** Streamlit-интерфейс с интерактивными формами, пагинацией и загрузкой CSV/XLSX, асинхронный сбор пакетов, нормализация и дедупликация данных, запись через `clickhouse-driver` и контроль прогресса.  
**Метрики/результаты:** Отображаются суммарные объёмы новых поверок и типов, статус парсинга деталей и идентификатор запуска; итоговые выгрузки доступны в таблицах ClickHouse.

## Стек
`Python`, `Streamlit`, `Requests`, `Pandas`, `clickhouse-driver`, `python-dotenv`

## Файлы
- `main.py` — Streamlit-приложение с двумя вкладками (VRI и MIT) и авторизацией.
- `fgis_clickhouse/` — модульная логика клиента ФГИС, HTTP-клиента, парсинга и загрузки в ClickHouse.
- `example.env` — пример переменных окружения для API-ключей и подключения к БД.

## Быстрый старт
- Создайте виртуальное окружение и установите зависимости: `pip install -r requirements.txt`.
- Скопируйте `example.env` в `.env`, заполните токен ФГИС и параметры ClickHouse.
- Запустите приложение командой `streamlit run main.py`.
